# 노션 DB 만들고 단어앱 연결 — 한 번에 따라하기

시제부사든 연결사든, **노션 DB 하나 만들고 → Integration 연결 → 앱 URL에 DB ID만 붙이면** 끝입니다.

---

## 1단계: 노션 DB 만들기

1. 노션에서 **새 페이지** 만들고, `/table` 또는 **테이블 - 인라인** 넣기.
2. **DB 이름**을 정합니다.  
   - 시제·부사용: 예) `토익 시제부사`  
   - 연결사용: 예) `연결사(접속부사)`  
   → **이 이름이 앱 화면 제목 + 모니터/개인기록 태그로 쓰입니다.**
3. **속성(컬럼)** 이름을 아래처럼 맞춥니다.

| 용도   | 속성 이름 (한글) | 대안 (영문)     |
|--------|------------------|-----------------|
| 단어   | 키워드           | keyword         |
| 뜻     | 뜻               | meaning         |
| 예문   | 예문             | example         |
| 시제/카테고리 | 테마       | theme (Select 또는 Multi-select) |

---

## 2단계: Integration(연결 키) 만들기

1. **https://www.notion.so/my/integrations** 접속.
2. **New integration** → 이름 입력 (예: `똑패스 단어앱`) → **Submit**.
3. **Internal Integration Secret** 복사 (`secret_xxx...`)  
   → 이걸 **NOTION_API_KEY** 로 씁니다.

---

## 3단계: 노션 DB에 Integration 연결

1. 방금 만든 **노션 DB 페이지**를 엽니다.
2. 오른쪽 위 **⋯** → **연결 추가(Add connections)**.
3. 2단계에서 만든 Integration 선택 → **연결**.
   - 이걸 안 하면 API에서 DB를 못 읽습니다.

---

## 4단계: DB ID 복사

1. 노션에서 해당 **데이터베이스 페이지**를 연 상태에서 **주소창 URL** 복사.  
   예: `https://www.notion.so/내워크스페이스/abc123def456789...?v=...`
2. URL에서 **`?` 앞까지** 있는 **32자리 영문+숫자** 부분이 DB ID입니다.  
   (`-` 는 있어도 없어도 되고, 앱에서 자동 처리합니다.)  
   예: `abc123def456789012345678901234ab`

---

## 5단계: Vercel에 키 넣기

1. **Vercel** → toeic-words 프로젝트 → **Settings** → **Environment Variables**.
2. 추가:
   - **Name:** `NOTION_API_KEY`
   - **Value:** 2단계에서 복사한 `secret_xxx...`
   - **Environment:** Production (필요하면 Preview도 체크)
3. **Save** 후 **Redeploy** 한 번 실행.

---

## 6단계: 앱에서 쓰는 주소

- **시제·부사 (index)**  
  `https://toeic-words-xxx.vercel.app/?db=여기에_DB_ID`

- **연결사 전용 (connector)**  
  `https://toeic-words-xxx.vercel.app/connector.html`  
  → 연결사 전용 DB ID는 `connector.html` 쪽에서 이미 고정돼 있으면, 주소만 열면 됩니다.  
  (똑패스 gas_src에서 “연결사 테스트” 누르면 이 주소로 열리게 해 두면 됩니다.)

- **제목만 바꾸고 싶을 때 (선택)**  
  `?db=xxx&set_title=원하는제목`

---

## 7단계: 똑패스에서 “시험 만점 족보”로 열기

- **gas_src/index.html** 에서 **WORDS_APP_URL** 을  
  `https://toeic-words-xxx.vercel.app/`  
  로 두고,
- 시제·부사 테스트는 **테스트 진행하기 → 시제·부사 테스트** 선택 시  
  `?db=시제부사_DB_ID` 가 붙은 URL로 열리게 하거나,
- 연결사는 **연결사(접속부사) 테스트** 선택 시  
  `.../connector.html` 로 열리게 해 두면 됩니다.

---

## 한 줄 요약

**노션 DB 만들기(속성 이름 맞추기) → Integration 만들고 DB에 연결 → DB ID 복사 → Vercel에 NOTION_API_KEY 넣고 Redeploy → 앱 주소에 `?db=DB_ID` 붙이기.**

이 순서만 지키면 노션에서 수정한 내용이 단어앱·모니터·개인기록에 그대로 반영됩니다.
